<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-list/iron-list.html">
<link rel="import" href="../iron-label/iron-label.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../ft-document-list-item/ft-document-list-item.html">

<!--
`ft-document-list`
An element that renders a list of FileThis documents

@demo demo/index.html
-->

<dom-module id="ft-document-list">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        <iron-list selection-enabled
                   id="documentList"
                   items="[[documents]]"
                   selected-item="{{selectedDocument}}"
                   as="item"
                   style="width:700px;">

            <!-- Document item template -->
            <template>
                <ft-document-list-item
                        style="border-bottom:1px solid #DDD;"
                        document="[[item]]"
                        selected$="[[selected]]">
                </ft-document-list-item>
            </template>
        </iron-list>

    </template>

    <script type="text/javascript" src="../log4javascript/log4javascript.js"></script>
    <script type="text/javascript">
        var log = log4javascript.getDefaultLogger();
    </script>

    <script>
        Polymer({

            is: 'ft-document-list',

            properties: {
                documents:
                {
                    type: Array,
                    notify: true,
                    value: [],
                    observer: "_onDocumentsChanged"
                },
                selectedDocument:
                {
                    type: Object,
                    notify: true,
                    value: null,
                    observer: "onSelectedDocumentChanged"
                },
                hasSelectedDocument:
                {
                    type: Boolean,
                    notify: true,
                    value: false,
                    observer: "onHasSelectedDocument"
                }
            },

            ready: function()
            {
                log.debug("ft-document-list ready");
            },

            _onDocumentsChanged: function()
            {
                this.$.documentList.fire('resize')
            },

            onSelectedDocumentChanged: function()
            {
                this.hasSelectedDocument = (this.selectedDocument != null);
            },

            onHasSelectedDocument: function()
            {
                log.debug("ft-document-list.onHasSelectedDocument(): this.hasSelectedDocument = " + this.hasSelectedDocument);
            }

        });
    </script>
</dom-module>
